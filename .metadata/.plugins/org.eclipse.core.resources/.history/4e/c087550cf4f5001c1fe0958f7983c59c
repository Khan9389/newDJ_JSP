<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@include file="/WEB-INF/jsp/common/include/common_header.jsp" %>
<!DOCTYPE html>
<html lang="ko">
<head>
	<meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>ì¤‘ê³ ê±°ë˜</title>
	<%@include file="/WEB-INF/jsp/common/include/home_static_resource.jsp" %>
</head>
<%
	String loginStat = StringUtil.defaultString((String) request.getAttribute("loginStat"), "");
	String MBR_ID = StringUtil.defaultString((String) session.getAttribute("MBR_ID")); // ì‚¬ìš©ì ID
%>
<script>
$(function() {
	$('.layerPrivacy .btn_close, .layerPrivacy .bg').click(function() {
		$('.layerPrivacy').removeClass('on');
	});
	$('.layerPrivacy_poly .btn_close, .layerPrivacy_poly .bg').click(function() {
		$('.layerPrivacy_poly').removeClass('on');
	});
	
	var loginStat = "<%=loginStat%>";
	
	if(loginStat === "LOGIN_FAIL"){
		alert("ë¡œê·¸ì¸ ì •ë³´ë¥¼ í™•ì¸í•˜ì„¸ìš”.")
	}
	if( "<%=MBR_ID%>" == "" || "<%=MBR_ID%>" == undefined){
		$(".offLogin").show();
	}else{
		$(".onLogin").show();
	}
	
function goLoginPop() {
	$("#mbrId").val('');
	$("#mbrPw").val('');
	$(".layerPrivacy").addClass('on');
}

function goJoinPop() {
	$("joinId").val('');
	$("joinPw").val('');
	$("#joinPwChk").val('');
	$('.layerPrivacy_poly').addClass('on');
}

function validateJoin(){
	
	if(cf_isEmpty($("#joinId").val().trim())){
		alert("ì•„ì´ë””ë¥¼ ì…ë ¥í•˜ì„¸ìš”.");
		$("#joinId").focus();  return false;
	}
	if(cf_isEmpty($("#joinPw").val().trim())){
		alert("ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”.");
		$("#joinPw").focus();  return false;
	}
	
	if($("#joinPw").val() != $("#joinPwChk").val()){
		alert("ë¹„ë°€ë²ˆí˜¸ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.")
		$("#joinPwChk").focus(); return false;		
	}
	return true;
}

function joinMbr() {
	if(!valideJoin())
		return;
	
	params = {
		mbrId : $('#joinId').val(),
		mbrPw : CryptoJS.SHA256($("#joinPw").val().toString())
	}
	cf_call("/joinMbr", params, joinMbrCB);
}

function joinMbrCB(data) {
	if(data.result == "succ"){
		alert("íšŒì›ê°€ì…ì´ ì™„ë£ŒëìŠµë‹ˆë‹¤.");
		location.href="/"
	}else{
		alert("ì´ë¯¸ ì‚¬ìš© ì¤‘ì¸ ì•„ì´ë”” ì…ë‹ˆë‹¤.")
	}
}

function goLogin() {
	
	if(!validataLogin()) return;
	
	var params = {
			mbrIf : $("mbrId").val(),
			inputMbrPw : CryptoJS.SHA256($("#mbrPw").val()).toString(),
		}
	cf_gotoUrl("/loginProc", params);		
}


function goMyPage() {
	location.href="/myPage";
}

function isLogin(){
	if("<%=MBR_ID%>" == "" || "<%=MBR_ID%>" == null || "<%=MBR_ID%>" == undefined){
		alert("ë¡œê·¸ì¸í›„ ì´ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.")		
		return false;
	}
	return true;
}
	
})u
</script>
<body>

<header>
	 <div class="header-div" style="display:  flex;">
	 
	 <div class="left-content">
          <ul class="MainUl">
       		<li id="heaher-logo"><Link to="/"><img src="static_resources/img/logo.png" alt=""></img></Link></li>
            <li id="menu-li"><a href="javascript:void(0)" class="Header-Menu">ğŸ›’ë§ˆì¼“</a></li>
            <li id="menu-li"><a href="javascript:void(0)" class="Header-Menu">ğŸ‘¨â€ğŸ‘¨ì™ìì§€ê»„</a></li>
            <li id="menu-li"><a href="javascript:void(0)" class="Header-Menu">â•â”ì§ˆë¬¸</a></li>
          </ul>
	 </div>
     <div class="util_group">
			<span class='offLogin' style="display:none"><a href="javascript:void(0);" onclick="goLoginPop()"	title="ë¡œê·¸ì¸ ë°”ë¡œê°€ê¸°">ë¡œê·¸ì¸</a></span> 
			<span class='offLogin' style="display:none"><a href="javascript:void(0);" onclick="goJoinPop()" title="íšŒì›ê°€ì… ë°”ë¡œê°€ê¸°">íšŒì›ê°€ì…</a></span>
			<span class='onLogin' style="display:none">í™˜ì˜í•©ë‹ˆë‹¤. <%=MBR_ID%> ë‹˜</span>
			<span class='onLogin' style="display:none"><a href="javascript:void(0);" onclick="goShowRoom()" title="ë§ˆì´í˜ì´ì§€ ë°”ë¡œê°€ê¸°">ë§ˆì´ë£¸</a></span>
			<span class='onLogin' style="display:none"><a href="/logoutProc" >ë¡œê·¸ì•„ì›ƒ</a></span>
	 </div>
      </div>
   </div>
	
</body>
</header>
<!-- ë¡œê·¸ì¸ íŒì—… [s] -->
<div class="layerPrivacy">
	<div class="bg"></div>
	<div class="popupcont">
		<div class="popupBody">
			<div class="btn_close">
				<a href="javascript:void(0);">close</a>
			</div>
			<div class="content login">
				<!-- í˜ì´ì§€íŠ¹ì • í´ë˜ìŠ¤ = login -->
				<div class="cont_head">
					<h4>ë¡œê·¸ì¸</h4>
				</div>
				<div class="cont_body">
					<div class="form_wrap form_col_c form_full">
						<input type="hidden" name="_csrf">
						<div class="form_field">
							<label class="input_label sr-only">ì•„ì´ë””</label>
							<div class="ui_col_12">
								<div class="input_wrap">
									<input type="text" name="mbrId" id="mbrId" placeholder="ì•„ì´ë””" class="form_control" onkeyup="if( event.keyCode==13 ){ $('#mbrPw').focus();}">
								</div>
							</div>
						</div>
						
						<div class="form_field mt10">
							<label class="input_label sr-only">ë¹„ë°€ë²ˆí˜¸</label>
							<div class="ui_col_12">
								<div class="input_wrap">
									<input type="password" name="mbrPw" id="mbrPw" class="form_control" placeholder="ë¹„ë°€ë²ˆí˜¸" onkeyup="if( event.keyCode==13 ){ goLogin();}">
								</div>
							</div>
						</div>
						
						<div class="ui_row mt40">
							<div class="ui_col_12">
								<button type="button" class="btn btn_dark btn_block" onclick="goLogin()">
									<span>ë¡œê·¸ì¸</span>
								</button>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<!-- ë¡œê·¸ì¸ íŒì—… [e] -->


<!-- íšŒì›ê°€ì… íŒì—… [s] -->
<div class="layerPrivacy_poly">
	<div class="bg"></div>
	<div class="popupcont">
		<div class="popupBody">
			<div class="btn_close">
				<a href="javascript:void(0);">close</a>
			</div>
			<div class="content login">
				<div class="cont_head">
					<h4>íšŒì›ê°€ì…</h4>
				</div>
				<div class="cont_body">
					<div class="form_wrap form_col_c form_full">
						<input type="hidden" name="_csrf">
						<div class="form_field">
							<label class="input_label sr-only">ì•„ì´ë””</label>
							<div class="ui_col_12">
								<div class="input_wrap">
									<input type="text" name="joinId" id="joinId" placeholder="ì•„ì´ë””" class="form_control" onkeyup="if( event.keyCode==13 ){ $('#joinPw').focus();}">
								</div>
							</div>
						</div>
						
						<!-- ë¹„ë°€ë²ˆí˜¸ [s] -->
						<div class="form_field mt10">
							<label class="input_label sr-only">ë¹„ë°€ë²ˆí˜¸</label>
							<div class="ui_col_12">
								<div class="input_wrap">
									<input type="password" name="joinPw" id="joinPw" class="form_control" placeholder="ë¹„ë°€ë²ˆí˜¸" onkeyup="if( event.keyCode==13 ){ $('#joinPwChk').focus();}">
								</div>
							</div>
						</div>
						<!-- ë¹„ë°€ë²ˆí˜¸ [e] -->
						
						<!-- ë¹„ë°€ë²ˆí˜¸ í™•ì¸ [s] -->
						<div class="form_field mt10">
							<label class="input_label sr-only">ë¹„ë°€ë²ˆí˜¸ í™•ì¸</label>
							<div class="ui_col_12">
								<div class="input_wrap">
									<input type="password" name="joinPwChk" id="joinPwChk" class="form_control" placeholder="ë¹„ë°€ë²ˆí˜¸ í™”ì¸" onkeyup="if( event.keyCode==13 ){ joinMbr();}">
								</div>
							</div>
						</div>
						<!-- ë¹„ë°€ë²ˆí˜¸ í™•ì¸ [e] -->
						
						<div class="ui_row mt40">
							<div class="ui_col_12">
								<button type="button" class="btn btn_dark btn_block" onclick="joinMbr()">
									<span>íšŒì›ê°€ì…</span>
								</button>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<!-- íšŒì›ê°€ì… íŒì—… [e] -->
